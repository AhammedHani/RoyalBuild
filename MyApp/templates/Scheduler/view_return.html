{% extends 'Scheduler/scheduler_home.html' %}
{% block x %}

<style>
  .table td img {
    width: 36px;
    height: 36px;
    border-radius: 100%; 
}
</style>
<body>
  <br><br>
  <form id="form1" name="form1" method="post" action="/view_return_post/">
    {% csrf_token %}
      <table class="pull-left">
        <tr>
          <th>From</th>
          <td>
          <input type="date" name="textfield1" id="textfield1" class="form-control" required/></td>
          <th>To</th>
          <td>
          <input type="date" name="textfield2" id="textfield2" class="form-control" required/></td>
          <td><input type="submit" name="button" id="button" value="Search" class="btn btn-info" /></td>
        </tr>
      </table>
  <br>
  {% if data %}
  <div style="text-align: center;">
    <table class="table table-bordered table-hover">
        <tr>
          <th>S. No</th>
          <th>Date</th>
          <th>Customer Details</th>
          <th>Reason</th>
          <th>Category</th>
          <th>Product</th>
          <th>Quantity</th>
          <th>Amount</th>
          <th>Status</th>
        </tr>
        {% for i in data %}
          <tr>
            <td>{{ forloop.counter  }}</td>
            <td>{{ i.date }}</td>
            <td>{{ i.ORDER.CUSTOMER.customer_name }}<br>
              {{ i.ORDER.CUSTOMER.address }}<br>
              {{ i.ORDER.CUSTOMER.pin }}<br>
              {{ i.ORDER.CUSTOMER.email }}<br>
              {{ i.ORDER.CUSTOMER.phone }}</td>
            <td>{{ i.reason }}</td>
            <td><img src="{{ i.ORDER.PRODUCT.CATEGORY.photo }}" alt="" class="img-thumbnail" /> {{ i.ORDER.PRODUCT.CATEGORY.category_name }}</td>
            <td><img src="{{ i.ORDER.PRODUCT.photo }}" alt="" class="img-thumbnail" /> {{ i.ORDER.PRODUCT.product_name }}</td>

            <td>{{ i.ORDER.quantity }}</td>
            <td>{{ i.ORDER.amount }}</td>
            <td>
              {% if i.ORDER.payment_method == 'COD' %}
                <span class="badge rounded-pill bg-warning">COD</span>
              {% elif i.ORDER.payment_method == 'BANK' %}
                <span class="badge rounded-pill bg-success">PAID</span>
              {% endif %}
            </td>
            <td><a href="/schedule_return/{{i.returns_id}}" class="btn btn-success btn-sm" title="return confirm">Confirm</a></td>
            <td><a href="" class="btn btn-danger btn-sm" title="return cancel">Cancel</a></td>
          </tr>
        {% endfor %}
    </table>
  </div>
  {% else %}
    <p>No return request available.</p>
  {% endif %}
</body>
{% endblock x %}
